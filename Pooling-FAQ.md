# 一般问题

## 如何加入矿池？

需要将Chia升级到1.2.0版本以上，然后查阅[Pooling User Guide](Pooling-User-Guide)中的说明。

## 加入官方矿池协议的矿池（后续统称为：新版矿池）的话就必须要重新开垦农田（P图）吗？

是的，想要加入并使用新版矿池，就需要创建新的K32格式农田或者更高格式的（K33等）。新格式的农田可以在矿池和自耕种池中自由切换，每次切换需要等待30分钟左右（100个区块时间），因为切换矿池需要向主网的智能合约发送信息。建议大家可以慢慢地把从老的农田一个一个的切换成新格式的农田，所以在你重新开垦农田的过程中依旧有机会赢取区块奖励（XCH）。

## 什么是农田产权证（含有非同质化代币的农田，plot NFT）

农田产权证是一种主网发行的智能通证（代币），用来帮助用户管理农田与矿池的关系。用户可以在任何时间通过使用农田产权证，来将自己的农田分配给自己想要加入的矿池。当你开垦农田时，需要选择你所创建的农田产权证，这样你所开垦的农田会永久地绑定在该农田产权证上。不同的农田产权证（plot NFTS）是不可互相替代的，每一个农田产权证可以当作是一个独一无二的矿池智能合约。

## 创建农田产权证或者切换矿池的时候需要付手续费吗？

创建农田产权证最少需要1mojo的XCH（0.000000000001 XCH）作为创建智能合约的费用，以及主网转账手续费（目前不需要）。切换矿池只需要支付一点儿转账手续费，在矿池协议刚上线的这段时间里，切换矿池可能不需要手续费。如果你没有XCH的话，可以去官方空投网站里填写你的XCH地址，领取100mojo: https://faucet.chia.net/ 。

## 可以同时耕种老版农田以及新版农田（带农田产权证的）吗？

可以。支持农民同时耕种老版农田以及新版农田。老图如果赢得了挑战，0.25XCH（农民奖励）和1.75XCH（矿池奖励）都会发送给农民。老的农田和新的农田可以一起耕种，互相不受影响。

## 如何为新开垦的农田添加产权证，以便后续加入矿池？
首先，你需要在农业合作社（POOL）分栏里创建一个农田产权证。当你开垦一个新版农田时，需要为农田分配一个农田产权证（使用命令行CLI工具开垦的话，需要将-p参数更换为-c参数，-c参数后面填写你生成农田产权证时所生成的XCH地址），被赋予相同农田产权证的农田可以被分配给同一个矿池里进行耕种。当然了，一个账号可以生成多个农田产权证。

## 密钥及钱包在Chia中的区别？
一台运行Chia的计算机可以生成一个或多个密钥（key），密钥由私钥信息（助记词）及公共指纹（身份）组成。当你使用客户端或者命令行时，一次只能操作一个账号（密钥）。不同密钥（账号）的钱包账本（区块）数据是不一样的，所以需要在“钱包”分栏确认是否已同步至最新区块高度。每个密钥（账号）可以分配多个钱包地址。打开软件登录账号以后的默认钱包是Chia自动生成的钱包地址，就像农田产权证一样，你也可以创建多个钱包，每个钱包都有不一样的地址（XCH开头），这些你所生成的钱包及农田产权证都是跟你的密钥所绑定的，“钱包”分栏内所显示的余额是你所有钱包地址余额的合计。

# Chia官方矿池协议与其他加密货币项目有什么不同？
主要有三个区别：
* 加入矿池无需签名授权，也不需要在矿池运营商注册账号。
* 农民挑战证明成功爆块后获得0.25个XCH（需扣除转账手续费），余下的1.75个XCH（需扣除矿池手续费）与矿池内所有的农民平分。
* 挑战成功并获得区块奖励的是农民，而不是矿池运营商，农民与矿池之间通过智能合约（农田产权证）来进行管理。

## 我如何自行运营矿池？
如果你有其他加密货币项目的矿池服务器运维经验，可以根据Chia矿池源代码来进行定制化修改。我们只会给大家推荐一些安全、有经验的矿池运营商。如果你运营了矿池，请遵守当地的法律法规，不限于纳税、反洗钱、客户身份等。同时，所有的Chia矿池都有可能成为黑客攻击的目标（主要是服务器方面的，例如DDOS攻击、安全漏洞等），如果矿池内的农民有任何损失，你需要承担相应的责任。

## 矿池列表在哪看？
社区做了一个Chia矿池列表网站：https://miningpoolstats.stream/chia

## 我能在官方讨论组里为我的矿池打广告吗？
你一天只能在Keybase @chia_network.public的pools频道里为你的矿池打一次广告。如果你滥发广告会受到管理员的警告直至禁言。

## 为什么不推荐加入Hpool的老版农田矿池？
Hpool在一开始重新构建了一个Chia客户端版本（1.2.0以前的版本），但他们没有开源这些修改内容，所以也就不知道这个客户端是否含有不安全的修改。Chia项目官方不支持任何人加入由封闭未开源软件所构建的矿池，不过Hpool已经针对新版官方矿池协议开设了矿池，你可以根据你自己的意向来选择是否加入hpool的新矿池。

## 为什么官方不运营自己的矿池？
我们希望构建一个健康、无特权且有活力的矿池生态环境，官方如果开始矿池了的话，对其它矿池不公平。

## 我的矿池能起名叫chiapool吗？
我们不允许矿池起以Chia、the chia pool开头的名字。你可以起名叫“a chia pool”，不过需要申请一下许可证，请浏览https://www.chia.net/terms/ 来获取关于许可证的更多信息。

## 如果某个矿池获得了51%的全网空间（算力），他们可以篡改主网吗？
不行，Chia矿池协议是这样设计的，农民与矿池之间是通过农田产权证的智能合约来相互绑定的，区块的打包及区块奖励挑战依旧是由农民完成的，但由于与矿池做了智能合约绑定，所以农民的矿池奖励（1.75XCH）会自动发送到已绑定矿池的钱包地址。这个机制的优点是，即使有矿池拥有全网51%的算力空间，那它还需要控制全网51%农民的节点，以便对主网进行恶意操作（51%攻击）。这是相当难以完成的事情，除非全网51%的农民下载运行了同一个恶意修改过的Chia客户端。（官方还在这尬吹了一下Bram Cohen ==！）

## 我还有疑问，在哪咨询？
加入官方Keybase讨论组：[@chia_network.public#pools](https://keybase.io/team/chia_network.public)

友情提示：别在群里瞎艾特官方开发人员以及管理员，直接陈述问题就行了，有空会回复你的。

# 技术问题
## 在哪查看Chia矿池案例的源代码？
Github上查看： https://github.com/Chia-Network/pool-reference.

自述文件概述了矿池的运行原理、解析以及建立运行矿池的细节。

## 矿池案例的是用什么语言开发的？
Python

## 根据矿池案例代码进行定制化困难吗？
如果你有矿池方面的开发经验，那么这对你来说很容易上手。只需要把POW挖矿概念替换成chia的POST挖矿方式，通过农民与矿池之间的智能合约来完成区块奖励（XCH）的收集与分配。

## 我是个程序员，但从来没有写过矿池的代码，可以根据矿池案例代码定制化自己的矿池吗？
如果你第一次开发矿池，建议你先看一下BTC或者ETH矿池的源代码及用户端的功能。你的矿池可能会面临来自加密社区的大型矿池运营商挑战，他们将在矿池协议上线的第一天就提供了丰富的功能，例如：排行榜、区块钱包浏览器、随机空投、阶梯手续费等等。

## 矿池代码中的变量名
- puzzle_hash: 由交易地址转化而成，一种供Chia客户端读取的格式.
- singleton: 即农田产权证，一种智能合约（通证），用来保证这是独一无二并由用户控制。
- launcher_id: 智能合约的ID号（独一无二的）
- points: 表示农民已完成的耕作量。它根据用户提交的证明（农田）数量以及难度进行加权计算的。一个K32的农田每天可以获得10个点，一天想要获得1000点就需要10TiB的农田。这个就相当于POW矿池中的算力占比。

## 如何计算农民的空间算力大小？
一个农民的总空间算力可以根据单位时间内获得的积分点数来估算，比如一秒获得多少个积分点。每个K32农田一天可以获得10点积分，所以每个K32农田每秒可以获得0.0001157点积分（10 / 86400 = 0.0001157），每字节就获得1.088 * 10^-15 点积分（L = 0.0001157 / 106364865085 = 1.088 * 10^-15）。假设所有的空间算力为'S'，这些算力在'T'时间内总共获得了'P'积分，所以'S = P / (L*T)'。

比如：6小时内获得了340点积分，使用公式'P=340，T=6*60*60=21600, L=1.088 * 10^-15'， 'S = 340/(21600*1.088e-15) = 14465621651619 字节 = 13.15 TiB'。

## 难度是如何影响计算农民的空间总算力？
随着难度的提升，加入矿池的农民会降低寻找证明的频率及数量，但这并不会影响农田在单位时间内所获得的积分点数。对于K32农田来说，难度为1时每天给矿池发送10份证明，难度为10时，每天给矿池发送1份证明。作为矿池运营商，你是希望每天收到1份还是10份（相对于K32）？这就是为什么，协议允许矿池运营商设置一个最小难度，为了此减少农民发送的证明数量，以此证明农民的空间算力大小。

## 如何识别农民所提交的证明？
农民加入矿池时会生成一个启动器ID，矿池也会验证农民提交的空间证明中的签名，以确保后续只有真实存在的农民才能获得奖励。

## 矿池服务器需要持续追踪记录所有农民及其获得的奖励吗？
是的，矿池运营商需要自行编写脚本代码来跟踪所有农民的信息及其获得的奖励。因为Chia矿池协议的设定是不需要注册就能加入矿池使用的，所以矿池服务器需要根据启动器ID来追踪那些提交了有效证明的农民。

## 农田产权证（singleton ≈ Plot NFT）可以执行哪些操作？
- 切换矿池（需要签名交易）
- 取消连接矿池（需要签名交易）
- 领取奖励（不需要签名交易，奖励会发送到与农田产权证绑定的地址）

## 矿池如何收集区块奖励？
- 农民加入矿池，农田产权证（Plot NFT）会被分配到所加入矿池的智能合约哈希地址（pool_puzzle_hash）。
- 当农民赢得区块奖励时，矿池部分奖励会发送到你的矿池合约哈希地址（p2_singleton_puzzle_hash ≈ Plot NFT的地址）。
- 矿池会扫描区块网络，通过农田产权证合约地址，找到收到矿池部分奖励的农民。
- 矿池会向已绑定的农田产权证发送申请奖励的智能合约操作。
- 农民的农田产权证智能合约就会把矿池部分奖励（1.75XCH），发送到所加入矿池的智能合约哈希地址。
- 矿池会定期根据农民获得的积分点数占比，来分配所有的矿池奖励。

## 如何判断矿池服务器从农民这里收到了足够多的有效证明？
提交的证明数矿池运营商唯一可以从你这所获得的信息，矿池无法获悉农民确切的空间算力。空间算力是根据积分点来反推计算的，一个K32农田在主网上每天可以获得10点积分。这就表示，如果难度为1，1个K32农田每天提供10个有效证明，如果难度为10，1个K32农田每天提供1个有效证明。难度不影响每天获得积分点数。

## 为什么测试网上获得的矿池点数多于主网的？
K32农田在主网的矿池里每天可以获得10点积分，这是基于主网的“难度系数”为2<sup>67</sup>。在测试网中，K32农田每天所获得的积分也是基于“困难系数”2<sup>67</sup>进行分配的，在“config.yaml”配置文件中设置，分配的点数相对于主网乘以10，也就是100点。这样是为了方便K25格式农田可以在测试网上使用。

## K32农田与K25农田的期望值有何区别？
查看源代码中的 `win_simulation.py` 文件。
## What is the expected ratio between a k32 and a k25? 
Look at the file `win_simulation.py` on this repo. This uses the function `_expected_plot_size` from chia blockchain,
which uses the formula:  `((2 * k) + 1) * (2 ** (k - 1))` to compute plot size. Plug in your k values and divide.

## 如何计算在 X 难度下，有 Y 大小的算力，Z 时间内，能获得多少矿池的区块奖励？
请自行查看‘win_simulation.py’文件。

## 测试网中开垦的新农田可以用到主网上吗？
不行，只有在主网下开垦的农田才能在主网上进行耕种，测试网也是一样。

## 由Chia分叉出去的那些项目是否无法使用农田产权证相关的功能？
由Chia分叉出去的项目可以很方便的使用Chia的矿池版本农田，把矿池部分的奖励（1.75XCH）发送到农民的钱包地址，类似于原版中的独自耕种（挖矿）不加入矿池的模式。如果这些项目也想实现矿池的形式耕种的话，那就需要创建一个特殊的“储备金池”，根据“启动器ID”以及启动器开销（包含了启动器所有者的签名），向其中提交信息的用户，可以根据自己所占矿池算力的比例，来自动分配到矿池部分的奖励。

## 支持Chia客户端的矿池服务API有哪些？
此处查看[ 矿池API ](Chia-Pool-Protocol-1.0)相关信息。

## 在哪可以看到关于矿池技术的讲解？
这里为对Chia矿池运营感兴趣的人提供了视频讲解。
- https://youtu.be/XzSZwxowPzw
- https://www.chia.net/assets/presentations/2021-06-02_Pooling_for_Pool_Operators.pdf